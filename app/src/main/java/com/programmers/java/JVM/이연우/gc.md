# GC ê°€ ì™œ ìˆì–´ì•¼ í• ê¹Œ?  GCëŠ” ì™œ ì•Œì•„ì•¼ í• ê¹Œ?

Cë‚˜ C++ ê°™ì€ ì–¸ì–´ì—ì„œëŠ”, ê°ì²´ì˜ ìƒì„±ê³¼ íŒŒê´´ì— ëŒ€í•œ ì±…ì„ì„ ê°œë°œìê°€ ê°–ê³  ìˆë‹¤. **ê°œë°œìê°€ ì–´ë–¤ ê°ì²´ë¥¼ íŒŒê´´í•˜ëŠ” ê²ƒì„ ê¹Œë¨¹ì„ ê²½ìš°,** **ê·¸ ê°ì²´ì— í• ë‹¹ëœ ë©”ëª¨ë¦¬ê°€ í•´ì œë˜ì§€ ì•ŠëŠ” ìƒí™©**ì´ ìƒê¸´ë‹¤. ì´ëŸ° **ìƒí™©ì´ ë§ì´ ì¼ì–´ë‚œë‹¤ë©´, ì‹œìŠ¤í…œ ë‚´ì˜ ì‚¬ìš©ì¤‘ì¸(í•˜ì§€ë§Œ ì‹¤ì§ˆì ìœ¼ë¡œëŠ” ì‚¬ìš©ë˜ì§€ ì•ŠëŠ”...) ë©”ëª¨ë¦¬ê°€ ê³„ì†í•´ì„œ ì¦ê°€**í•˜ì—¬ ê²°êµ­ì—ëŠ” í• ë‹¹ í•  ë©”ëª¨ë¦¬ê°€ ë‚¨ì•„ìˆì§€ ì•Šê²Œ ëœë‹¤. ì´ëŸ° ìƒí™©ì„ ***â€œë©”ëª¨ë¦¬ ëˆ„ìˆ˜ê°€ ìˆë‹¤"*** ë¼ê³  í•œë‹¤. ì–´ëŠ ì‹œì ë¶€í„°ëŠ” ìƒˆë¡œìš´ ê°ì²´ë¥¼ ìƒì„±í•  ì¶©ë¶„í•œ ë©”ëª¨ë¦¬ê°€ ì—†ê²Œ ë  ê²ƒì´ê³ , ì´ ê²½ìš° í”„ë¡œê·¸ë¨ì€ OOME(OutOfMemoryErrors)ë¡œ ì¸í•´ ë¹„ì •ìƒ ì¢…ë£Œí•˜ê²Œ ëœë‹¤.

ì´ ë¬¸ì œëŠ” **ë©”ëª¨ë¦¬ í•´ì œí•˜ëŠ” ê²ƒì„ ê¹Œë¨¹ì—ˆê¸° ë•Œë¬¸ì—,  ì¦‰ í”„ë¡œê·¸ë˜ë¨¸ê°€ ì‚¬ëŒì´ê¸° ë•Œë¬¸ì— ë°œìƒ**í•˜ê²Œ ë˜ëŠ” ìƒí™©ì´ë‹¤.

ê·¸ë ‡ë‹¤ë©´ ***ë§Œì•½ ë”ì´ìƒ ì‚¬ìš© ë˜ì§€ ì•ŠëŠ” ë©”ëª¨ë¦¬ë¥¼ ìë™ìœ¼ë¡œ í•´ì œí•´ì¤€ë‹¤ë©´*** ì–´ë–¨ê¹Œ?

Javaì—ì„œëŠ” garbage collection ì´ ì¼ì–´ë‚˜ í”„ë¡œê·¸ë¨ì˜ ë¼ì´í”„ íƒ€ì„ë™ì•ˆ ìë™ìœ¼ë¡œ ë©”ëª¨ë¦¬ë¥¼ ê´€ë¦¬í•´ ì¤€ë‹¤. ë”°ë¼ì„œ ê°œë°œìê°€ ì§ì ‘ ê°ì²´ë¥¼ release í•˜ëŠ” ì±…ì„ì„ ê°–ì§€ ì•Šì•„ë„ ë˜ë©° ì´ëŠ” ì–´ì°Œë³´ë©´ ë©”ëª¨ë¦¬ ëˆ„ìˆ˜ë¥¼ í”¼í•  ìˆ˜ë„ ìˆëŠ” ê²ƒ ì²˜ëŸ¼ ë³´ì¸ë‹¤.

í•˜ì§€ë§Œ ì‹¤ì œë¡œ ê°€ë¹„ì§€ ì»¬ë ‰ì…˜ì´ ì¼ì–´ë‚˜ëŠ” ë™ì•ˆ â€œstop the worldâ€ ë¼ëŠ” ê²ƒì´ ì¼ì–´ë‚˜ê¸° ë•Œë¬¸ì— í”„ë¡œê·¸ë¨ì˜ ì„±ëŠ¥ì— ì˜í–¥ì„ ë¯¸ì¹œë‹¤. ë˜í•œ ê°€ë¹„ì§€ ì»¬ë ‰ì…˜ì´ ì¼ì–´ë‚˜ê¸°ì „ì— OOME ê°€ ë°œìƒí•  ìˆ˜ ìˆê¸° ë•Œë¬¸ì— ê°œë°œìëŠ” ì—¬ì „íˆ ë©”ëª¨ë¦¬ ìƒì— ì¡´ì¬í•˜ëŠ” ê°ì²´ë“¤ì— ëŒ€í•´ ê³ ë ¤í•˜ë©° ê°œë°œí•´ì•¼í•œë‹¤. **íŠ¹íˆ Javaì˜ ê²½ìš° í•´ë‹¹ ê°ì²´ê°€ ì—¬ì „íˆ â€œì‚¬ìš©ë˜ê³  ìˆëŠ”ì§€" ê°€ í•´ë‹¹ ê°ì²´ê°€ Garbage ê°€ ë ì§€ ë§ì§€ì— ì˜í–¥ì„ ë¼ì¹˜ê¸° ë•Œë¬¸ì— ìŠ¤ì½”í”„ë¥¼ ì˜ ê³ ë ¤í•´ ì£¼ì–´ì•¼ í•œë‹¤ê³  ìƒê°í•œë‹¤**

[NAVER D2](https://d2.naver.com/helloworld/1329)

[What Is Garbage Collection? | Plumbr - User Experience & Application Performance Monitoring](https://plumbr.io/handbook/what-is-garbage-collection)

# GC ì— ëŒ€í•´ ë“¤ì–´ê°€ì

## Stop the world

GCì— ëŒ€í•´ ì•Œì•„ë³´ê¸° ì „ â€œstop-the-worldâ€ ì— ëŒ€í•´ ì•Œì•„ë³´ì.

ì´ëŠ” GCë¥¼ ì‹¤í–‰í•˜ê¸° ìœ„í•´ JVMì´ ì–´í”Œë¦¬ì¼€ì´ì…˜ ì‹¤í–‰ì„ ë©ˆì¶”ëŠ” ê²ƒì´ë‹¤.

> **GCë¥¼ ì‹¤í–‰í•˜ëŠ” ìŠ¤ë ˆë“œë¥¼ ì œì™¸í•œ ë‚˜ë¨¸ì§€ ìŠ¤ë ˆë“œ ëª¨ë‘ê°€ ì‘ì—…ì„ ë©ˆì¶˜ë‹¤.**
>

GC ì—ëŠ” ë‹¤ì–‘í•œ ì•Œê³ ë¦¬ì¦˜ì´ ì¡´ì¬í•˜ëŠ”ë° ì–´ë–¤ ì•Œê³ ë¦¬ì¦˜ì„ ì‚¬ìš©í•˜ë”ë¼ë„ stop-the-world ëŠ” ë°œìƒí•œë‹¤.

**ì£¼ë¡œ GC íŠœë‹ì´ë€ â€œstop-the-worldâ€ ì‹œê°„ì„ ì¤„ì´ëŠ” ê²ƒì„ ì˜ë¯¸**í•œë‹¤.

- ê·¸ëŸ°ë°.. **ì™œ collection ì´ ì¼ì–´ë‚œë‹¤ê³  Stop-the-world ë¥¼ í•´ì•¼í•˜ëŠ”ê±¸ê¹Œ???ğŸ¤”**
    - JVM ì˜ GC ì—ì„œëŠ” **reachable ê°ì²´ì„ì„ í™•ì¸í•¨ + ë ˆí¼ëŸ°ìŠ¤ ì¹´ìš´íŠ¸**ë¥¼ í•˜ëŠ”ë°, ê³„ì†í•´ì„œ ì°¸ì¡°ìƒí™©ì´ ë³€í•˜ê³  ìˆëŠ” ì™€ì¤‘ì— ì´ëŸ° ê²ƒì„ í•  ìˆ˜ëŠ” ì—†ê¸° ë•Œë¬¸ì´ë‹¤.

---

GC ëŠ” garbage ë¥¼ ì²­ì†Œ(?ë©”ëª¨ë¦¬í•´ì œ?) í•œë‹¤.

ê·¸ë ‡ë‹¤ë©´ Garbage ëŠ” ì–´ë–»ê²Œ ì•Œì•„ë‚´ëŠ”ê±¸ê¹Œ??

> ğŸ¤”Â **ê°€ë¹„ì§€ë¥¼ ì•Œì•„ë‚¸ë‹¤ ë³´ë‹¤ëŠ”, ì‚´ì•„ìˆëŠ” ê°ì²´ë“¤ì„ íŒŒì•…í•´ë‚˜ê°€ê³  ê·¸ ì™¸ì˜ ê²ƒë“¤ì€ ê°€ë¹„ì§€ ë¡œ ì²˜ë¦¬í•˜ëŠ” ê²ƒ ê°™ë‹¤.**
>

ì‰½ê²ŒëŠ” ë ˆí¼ëŸ°ìŠ¤ ì¹´ìš´íŒ… ì´ë¼ëŠ” ê²ƒì„ í†µí•´ì„œ ê°€ë¹„ì§€ì¸ì§€ íŒŒì•…í•˜ëŠ” ë°©ë²•ì´ ìˆë‹¤.

## Reference Counting

ê°ì²´ë¥¼ ì°¸ì¡°í•˜ëŠ” ìˆ˜ ( reference count) ë¥¼ í†µí•´ ë©”ëª¨ë¦¬ë¥¼ ê´€ë¦¬í•œë‹¤. ìµœì¢…ì ìœ¼ë¡œ í•´ë‹¹ ê°ì²´ì˜ ë ˆí¼ëŸ°ìŠ¤ ì¹´ìš´íŠ¸ê°€ 0ì´ ë˜ë©´, ì¦‰ ë”ì´ìƒ ì°¸ì¡°ë˜ì§€ ì•Šì„ ê²½ìš° garbageê°€ ë˜ì–´  gcì— ì˜í•´ ì •ë¦¬ëœë‹¤.

ì´ˆë¡ìƒ‰ êµ¬ë¦„ê°™ì€ ë¶€ë¶„ì—ì„œ ë‚˜ì˜¨ í™”ì‚´í‘œê°€ ê°€ë¦¬í‚¤ê³  ìˆëŠ” ê²ƒì€ ì´ ê°ì²´ê°€ ê°œë°œìì— ì˜í•´ ì—¬ì „íˆ ì‚¬ìš© ì¤‘ì¸ ê²ƒì„ì„ ê°€ë¦¬í‚¨ë‹¤.  ë™ê·¸ë¼ë¯¸ ì•ˆì—ëŠ” ì´ë“¤ì— ëŒ€í•œ ë ˆí¼ëŸ°ìŠ¤ íšŸìˆ˜ê°€ ì í˜€ ìˆë‹¤.

![img_7.png](img_7.png)

> ë¬¸ì œ ìƒí™© : ìˆœí™˜ì°¸ì¡°
>

ìˆœí™˜ ì°¸ì¡°ëŠ”, ì„œë¡œë¥¼ ì°¸ì¡°í•˜ê³  ìˆëŠ” ì´ ê°ì²´ë“¤ ì¤‘ ì–´ëŠ ëˆ„êµ¬ë„ ë”ì´ìƒ ì‚´ì•„ìˆëŠ” scopeì— ë“¤ì–´ìˆì§€ ì•ŠìŒì—ë„( ì´ë“¤ ì¤‘ ì–´ëŠëˆ„êµ¬ë„ ë” ì´ìƒ ì‚¬ìš© ì¤‘ì¸ ê°ì²´ê°€ ì•„ë‹˜ì—ë„ ) , ì´ë“¤ ì°¸ì¡°ê´€ê³„ì— ì‹¸ì´í´ì´ ì¡´ì¬í•˜ì—¬ ì–´ëŠëˆ„êµ¬ë„ ë ˆí¼ëŸ°ìŠ¤ ì¹´ìš´íŠ¸ê°€ 0ì´ ë˜ì§€ ì•ŠëŠ” ìƒí™©ì„ ë§í•œë‹¤.

ì´ëŠ” **ë ˆí¼ëŸ°ìŠ¤ ì¹´ìš´íŠ¸ì˜ í•œê³„ë¡œ ì´ëŸ° ìƒí™©ìœ¼ë¡œ ì¸í•´ â€œë©”ëª¨ë¦¬ ëˆ„ìˆ˜"ê°€ ë°œìƒ**í•œë‹¤.

ë”°ë¼ì„œ ì´ë¥¼ í•´ê²°í•˜ëŠ” ë°©ë²• ( cycle íƒìƒ‰ì„ ìœ„í•œ ë³„ë„ ì•Œê³ ë¦¬ì¦˜ì„ ë‘”ë‹¤ê±°ë‚˜..) ì´ í•„ìš”í•˜ë‹¤.

---

ë‹¨ìˆœíˆ ë ˆí¼ëŸ°ìŠ¤ ì¹´ìš´íŒ…ì„ ì‚¬ìš©í•˜ëŠ” ê²ƒì€ ì¢‹ì§€ ëª»í•œ ë°©ë²• ê°™ë‹¤.

ì‹¤ì œë¡œëŠ” Markingì´ë¼ê³  ë¶€ë¥´ëŠ” ê³¼ì •ì„ í†µí•´ ì‚´ì•„ ìˆëŠ” ê°ì²´ë¥¼ ì°¾ì•„ë‚¸ë‹¤ê³  í•œë‹¤.

## Reachable ê°ì²´ë¥¼ Marking í•˜ê¸°

JVM ì˜ GC ì•Œê³ ë¦¬ì¦˜ë“¤ì—ì„œëŠ” ì‚´ì•„ìˆëŠ” ê°ì²´ë“¤ì„ ì°¾ì•„ë‚´ëŠ” ê²ƒ ë¶€í„° ì‹œì‘í•œë‹¤.

GC ì—ì„œëŠ” ë¨¼ì € Garbage collection roots ë¼ëŠ” ê°ì²´ë“¤ë¶€í„° ì •ì˜í•˜ê³  ì‹œì‘í•œë‹¤.

> Garbage Collection root : gc í”„ë¡œì„¸ìŠ¤ì˜ ì‹œì‘ì 
>
> - ëª¨ë“  ê°ì²´ë“¤ì€ ì§ì ‘ ë˜ëŠ” ê°„ì ‘ì ìœ¼ë¡œ GC rootì— ì˜í•´ ì°¸ì¡°ë˜ê³  ìˆë‹¤.
    >     - ì¢…ë¥˜
            >         - ì§€ì—­ ë³€ìˆ˜
>         - Active threads
>         - Static fields
>         - JNI references
            >
            >         ë“±..
>
>
>     [https://www.baeldung.com/java-gc-roots](https://www.baeldung.com/java-gc-roots)
>
- Marking : GC roots ì—ì„œë¶€í„° ì‹œì‘í•´ ê°ì²´ ê·¸ë˜í”„ë¥¼ ë”°ë¼( root ë¡œë¶€í„°ì˜ ì°¸ì¡°ë“¤_ex.ì¸ìŠ¤í„´ìŠ¤ í•„ë“œ..ì„ ë”°ë¼ ) íƒìƒ‰í•˜ë©° ëª¨ë“  reachable ê°ì²´ë“¤ì— â€œì‚´ì•„ìˆë‹¤ ë¼ëŠ” ë§ˆí‚¹â€ ì„ í•œë‹¤
    - ë§ˆí‚¹ ë‹¨ê³„ê°€ ëë‚˜ë©´, ì‚´ì•„ìˆëŠ” ëª¨ë“  ê°ì²´ëŠ” ë§ˆí¬ëœ ìƒíƒœê°€ ëœë‹¤. ë”°ë¼ì„œ ë‹¤ë¥¸ ê°ì²´ë“¤ì€ GC roots ë¡œë¶€í„° Uncreachable í•˜ë‹¤ëŠ” ê²ƒì´ê³ , ì´ëŠ” í˜„ì¬ ì–´í”Œë¦¬ì¼€ì´ì…˜ì—ì„œëŠ” unrechable ê°ì²´ë“¤ì„ ë”ì´ìƒ ì‚¬ìš©í•˜ì§€ ì•ŠëŠ”ë‹¤ëŠ” ê²ƒì„ ì˜ë¯¸í•œë‹¤. ì´ëŠ” ê°€ë¹„ì§€ì— í•´ë‹¹í•˜ëŠ” ê²ƒì´ê³  GC ì—ì„œëŠ” ë‹¤ìŒë‹¨ê³„ì—ì„œ ì´ë“¤ì„ ì œê±°í•´ì¤˜ì•¼ í•œë‹¤.
    - ë§ˆí‚¹ì´ ì¼ì–´ë‚˜ëŠ” ë™ì•ˆ stop-the-world pause ê°€ ì¼ì–´ë‚˜ëŠ”ë°, ì´ pauseì˜ ì§€ì†ì‹œê°„ì„ ê²°ì •í•˜ëŠ” ìš”ì¸ì€ ë‹¤ìŒê³¼ ê°™ë‹¤.
        - heap ë‚´ì˜ ê°ì²´ì˜ ìˆ˜ ?? âŒ
        - heap ì˜ ì‚¬ì´ì¦ˆ  âŒ
        - ì‚´ì•„ìˆëŠ” ê°ì²´ì˜ ìˆ˜ â­•ï¸

      ë”°ë¼ì„œ ë‹¨ì§€ í™ì˜ ì‚¬ì´ì¦ˆë¥¼ ëŠ˜ë¦¬ëŠ” ê²ƒ ë§Œìœ¼ë¡œëŠ” ì§ì ‘ì ìœ¼ë¡œ ë§ˆí‚¹ ë‹¨ê³„ì— ê±¸ë¦¬ëŠ” ì‹œê°„ì— ì˜í–¥ì„ ë¼ì¹˜ì§„ ì•ŠëŠ”ë‹¤ê³  í•œë‹¤. ( ì‚´ì•„ìˆëŠ” ê°ì²´ì˜ ìˆ˜ê°€ ëŠ˜ì–´ë‚œë‹¤ë©´ ì˜í–¥ì´ ìˆì„ ë“¯ í•˜ë‹¤ )


ì¦‰ ì´ ê³¼ì •ì—ì„œëŠ” ì´ì œ reachable ê°ì²´ì™€ unreachable ê°ì²´ë¥¼ í™•ì¸í•˜ê¸° ë•Œë¬¸ì— ë”ì´ìƒ ë ˆí¼ëŸ°ìŠ¤ ì¹´ìš´íŒ…ì—ì„œ ì¼ì–´ë‚˜ë˜ ë©”ëª¨ë¦¬ ëˆ„ìˆ˜ëŠ” ì—†ë‹¤.

í•˜ì§€ë§Œ ë¬¸ì œëŠ”, collection ì´ ì¼ì–´ë‚˜ê¸° ìœ„í•´ì„œëŠ” ë‹¤ë¥¸ application thread ë“¤ì´ ë©ˆì¶°ì•¼ í•œë‹¤. ( ì°¸ì¡° ìƒíƒœê°€ ê³„ì† ë³€í•˜ê³  ìˆëŠ” ì¤‘ì¸ë° ë ˆí¼ëŸ°ìŠ¤ ì¹´ìš´íŠ¸ë¥¼ ì„¸ëŠ” ê²ƒì€ ë§ì´ ì•ˆë˜ë‹ˆê¹Œ )

ê°ì¢… GC ë“¤ì—ì„œëŠ” ì´ëŸ¬í•œ stop-the-world ì˜ ì‹œê°„ì„ ì¤„ì´ë ¤ê³  ë…¸ë ¥í•˜ê³  ìˆë‹¤.

## ì‚¬ìš©ë˜ì§€ ì•ŠëŠ” ê°ì²´ ì œê±°í•˜ê¸°

GC ì•Œê³ ë¦¬ì¦˜ë§ˆë‹¤ ì‚¬ìš©ë˜ì§€ ì•ŠëŠ” ê°ì²´ë¥¼ ì œê±°í•˜ëŠ” ë°©ì‹ì´ ì¡°ê¸ˆì”© ë‹¤ë¥´ì§€ë§Œ ë§ˆí‚¹ ì´í›„ì˜ ê³¼ì •ì€ ë‹¤ìŒê³¼ ê°™ì´ ë‚˜ëˆ ë³¼ ìˆ˜ ìˆë‹¤. .

- Sweeping
- Compacting
- Copying

---

## Memory fragmentation ê³¼ Compaction

Sweeping ì´ ì¼ì–´ë‚  ë•Œ JVM ì—ì„œëŠ” unreachable ê°ì²´ë“¤ë¡œ ì±„ì›Œì ¸ ìˆëŠ” ê³µê°„ì„ ë‹¤ë¥¸ ëª©ì ìœ¼ë¡œ ì‚¬ìš©ë  ìˆ˜ ìˆë„ë¡(ìƒˆë¡œìš´ ê°ì²´ë¥¼ ìœ„í•´..) í•´ì œ í•´ ì¤˜ì•¼ í•œë‹¤.

![img_8.png](img_8.png)

ì´ëŸ° ê³¼ì •ì—ì„œ Memory fragmentation(ë©”ëª¨ë¦¬ ë‹¨í¸í™”) ê°€ ë°œìƒí•˜ëŠ”ë° ì´ëŠ” ë‘ ê°€ì§€ ë¬¸ì œì ì„ ë‚³ëŠ”ë‹¤.

- Write ì—°ì‚°ì— ê±¸ë¦¬ëŠ” ì‹œê°„ì´ ì¦ê°€í•œë‹¤.
    - í˜„ì¬ í•„ìš”í•œ ì‚¬ì´ì¦ˆì˜ free block ì„ ì°¾ëŠ”ë° ì‹œê°„ì´ ê±¸ë¦¼.
- ìƒˆë¡œìš´ ê°ì²´ë¥¼ ìƒì„± í•  ë•Œë©´, JVM ì€ ì—°ì†ëœ ë¸”ë½ìœ¼ë¡œ ì´ë£¨ì–´ì§„ ë©”ëª¨ë¦¬ë¥¼ í• ë‹¹í•´ì¤€ë‹¤. ê·¸ëŸ°ë° ë©”ëª¨ë¦¬ ë‹¨í¸í™” ìƒí™©ì˜ ë¬¸ì œì ì€, ê·¸ free block ì¡°ê° ì¡°ê°ë“¤ ì„ í•©í•œë‹¤ë©´, ê·¸ ê°ì²´ì—ê²Œ í• ë‹¹í•´ì£¼ê¸°ì— ì¶©ë¶„í•œ ë©”ëª¨ë¦¬ì´ì§€ë§Œ, ê°œê°œì˜ ì¡°ê°ìœ¼ë¡œëŠ” ìƒˆë¡œ ìƒì„±ë˜ëŠ” ê°ì²´ë¥¼ ë‹´ì„ë§Œí¼ ì¶©ë¶„í•˜ì§€ ì•Šë‹¤ëŠ” ê²ƒì´ë‹¤.

ë”°ë¼ì„œ JVM ì—ì„œëŠ” GCê°€ ì¼ì–´ë‚˜ëŠ” ë™ì•ˆ mark and sweep ì´ì™¸ì—ë„ â€œë©”ëª¨ë¦¬ ìµœì í™”"ë¥¼ í†µí•´, reachable ê°ì²´ë“¤ì„ í•œ ê³³ì— ì—°ì†ì ìœ¼ë¡œ ëª°ì•„ì£¼ëŠ” ì»´íŒ©ì…˜ ì„ í•´ ì¤€ë‹¤.

---

# Heap ë©”ëª¨ë¦¬

## ë‘ ê°œì˜ ì˜ì—­

> ì•ì„œ GC ë™ì•ˆ Stop-The-World ë¥¼ í•œë‹¤ê³  í–ˆë‹¤.
>
>
> ê·¸ë ‡ë‹¤ë©´.. ğŸ¤”Â ***ì‹œìŠ¤í…œ ë‚´ì— ê°ì²´ê°€ ë§ì´ ì¡´ì¬í•  ìˆ˜ë¡ garbage ë¥¼ ëª¨ìœ¼ëŠ”ë° ( ë˜ëŠ” ì‚´ì•„ìˆëŠ” ëª¨ë“  ê°ì²´ë“¤ì„ marking í•˜ëŠ”ë° ) ê±¸ë¦¬ëŠ” ì‹œê°„ì´ ëŠ˜ì–´ë‚˜ì§€ ì•Šì„ê¹Œ??***
>
> **ë‹¤í–‰íˆ JVM ì€ ë©”ëª¨ë¦¬ ì˜ì—­ì„ ìª¼ê°œë†“ì•˜**ê³ , í•´ë‹¹ ì˜ì—­ì—ì„œ ê´€ë¦¬í•˜ëŠ” ê°ì²´ì— ëŒ€í•œ GC ê°€ ì¼ì–´ë‚˜ëŠ” ì‹ìœ¼ë¡œ ë™ì‘í•œë‹¤.
>
> ì´ì— ëŒ€í•´ ì‚´í´ë³´ì.
>

Heap ì˜ì—­ì€ ë‘ ê°œì˜ ì˜ì—­ìœ¼ë¡œ ë‚˜ë‰˜ì–´ì ¸ ìˆëŠ”ë°, ì´ëŠ” ê°ì²´ í• ë‹¹ì—ì„œ ê´€ì°°ëœ íŠ¹ì§• ë•Œë¬¸ì— ìƒê¸´ ê°€ì„¤('weak generational hypothesisâ€™) ë•Œë¬¸ì´ë‹¤.

- **ëŒ€ë¶€ë¶„ì˜ ê°ì²´ëŠ” ê¸ˆë°© unreachable í•´ ì§„ë‹¤**.
- **ì˜¤ë˜ëœ ê°ì²´ì—ì„œ ì Šì€ ê°ì²´ë¡œì˜ ì°¸ì¡°ëŠ” ì•„ì£¼ ì ê²Œ ì¡´ì¬**í•œë‹¤.

ì´ë ‡ê²Œ ë‚˜ëˆ„ì–´ì§„ ê³µê°„ì€ ê°ê° Young, Old Generation ì´ë¼ê³  ë¶ˆë¦°ë‹¤.

ê° ê³µê°„ì€ ê°œë³„ì ìœ¼ë¡œ gc ê°€ ì¼ì–´ë‚˜ê¸° ë•Œë¬¸ì—, ì„œë¡œ ë‹¤ë¥¸ ì•Œê³ ë¦¬ì¦˜ì„ í†µí•´ GC ì„±ëŠ¥ì„ ë†’ì¼ ìˆ˜ë„ ìˆë‹¤.

- **Young Generation ì˜ì—­ : ìƒˆë¡­ê²Œ ìƒì„±í•œ ê°ì²´ ëŒ€ë¶€ë¶„ì´ ì—¬ê¸°ì— ìœ„ì¹˜í•œë‹¤. ëŒ€ë¶€ë¶„ì˜ ê°ì²´ê°€ ì ‘ê·¼ ë¶ˆê°€ëŠ¥í•´ì§€ê¸° ë•Œë¬¸ì— ë§ì€ ê°ì²´ê°€ Young ì— ìƒì„±ë˜ì—ˆë‹¤ê°€ ì‚¬ë¼ì§„ë‹¤.**
    - ì´ ì˜ì—­ì— ëŒ€í•œ GCê°€ ì¼ì–´ë‚˜ëŠ” ê²ƒ â†’  Minor GCê°€ ë°œìƒí•œë‹¤ê³  í•¨
- **Old Generation ì˜ì—­ : *Young ì—ì„œ ì‚´ì•„ë‚¨ì€ ê°ì²´ë“¤(ì¦‰ ì˜¤ëœ ì‹œê°„ Unreachable í•´ ì§€ì§€ ì•Šì€ ê°ì²´ë“¤) ì´ ì—¬ê¸°ë¡œ ë³µì‚¬*ëœë‹¤.**
    - ëŒ€ë¶€ë¶„ Young ì˜ì—­ë³´ë‹¤ í° ê³µê°„ì„ í• ë‹¹.
    - í¬ê¸°ê°€ í° ë§Œí¼ ì´ê³³ì— ëŒ€í•œ GC ê°€ ì¼ì–´ë‚˜ë©´ íš¨ìœ¨ì´ ë–¨ì–´ì§ˆ ê²ƒ. Young ë³´ë‹¤ GC ê°€ ì ê²Œ ë°œìƒ.
    - ì´ ì˜ì—­ì— ëŒ€í•œ GCê°€ ì¼ì–´ë‚˜ëŠ” ê²ƒ â†’  Major GC( Full GC) ê°€ ë°œìƒí•œë‹¤ê³  í•¨
- ì°¸ê³ ë¡œ Java8 ì´ì „ JVM ì—ëŠ” Permanent Generation ì´ë¼ëŠ” ì˜ì—­ë„ ì¡´ì¬ í–ˆëŠ”ë°
    - ì˜¤í•´í•˜ë©´ ì•ˆ ë˜ëŠ”ê²Œ, â€œOld Generation ì—ì„œ ì‚´ì•„ë‚¨ì€ ì• ë“¤ì´ ì˜¤ëŠ” ê³³ì¸ê°€ë´..â€ ê°€ ì•„ë‹ˆë¼ëŠ” ê²ƒ!!
    - ì´ ì˜ì—­ë„ GC ì˜ ëŒ€ìƒ
        - ì—¬ê¸°ì„œ ì¼ì–´ë‚˜ëŠ” GC â‡’ Major GC ì— í¬í•¨

---

## Young ì˜ì—­

- ê°ì²´ê°€ ì œì¼ ë¨¼ì € ìƒì„±ë˜ëŠ” ì˜ì—­ì´ë‹¤.
- ì•„ê¹Œë„ ë§í–ˆì§€ë§Œ ì—¬ê¸°ì„œ ì¼ì–´ë‚˜ëŠ” GC â†’ Minor GC
- 3ê°€ì§€ ì˜ì—­ìœ¼ë¡œ ë‚˜ë‰œë‹¤.
    - Eden
    - Suvivor1, Survivor2

> ***Survivor ì˜ì—­ ì¤‘ í•˜ë‚˜ëŠ” ë°˜ë“œì‹œ ë¹„ì–´ìˆëŠ” ìƒíƒœë¡œ ë‚¨ì•„ìˆì–´ì•¼ í•œë‹¤***
>
> - ë¹„ì •ìƒ ìƒí™©
    >     - Survivor 1, 2 ëª¨ë‘ì— ë°ì´í„°ê°€ ì¡´ì¬
>     - Survivor 1, 2 ëª¨ë‘ ì‚¬ìš©ëŸ‰ì´ 0

ê° ì˜ì—­ì— ê°ì²´ê°€ ìœ„ì¹˜í•˜ê²Œ ë˜ëŠ” ìˆœì„œëŠ” ì´ë ‡ë‹¤.

1. ìƒˆë¡œ ìƒì„±í•˜ëŠ” ëŒ€ë¶€ë¶„ì˜ ê°ì²´ëŠ” Eden ì— ìœ„ì¹˜
2. Eden ì—ì„œ GC ë°œìƒ + ë¹„ì–´ìˆì§€ ì•Šì€ Survivor ì—ì„œë„ GC â€”> ë¹„ì–´ìˆëŠ” Survivor ì˜ì—­ìœ¼ë¡œ ì´ë™
3. í•˜ë‚˜ì˜ Survivor ì˜ì—­ì´ ê°€ë“ì°¨ë©´, ì—¬ê¸°ì„œ ì‚´ì•„ë‚¨ì€ ê°ì²´ë¥¼ ë‹¤ë¥¸ Survivor ë¡œ ì´ë™ì‹œì¼œ, ê°€ë“ ì°¨ ìˆë˜ Survivor ì€ ì•„ë¬´ ë°ì´í„°ë„ ì—†ëŠ” ìƒíƒœê°€ ë˜ê²Œ í•œë‹¤.

ìœ„ì˜ ê³¼ì •ì„ ë°˜ë³µí•˜ë‹¤ë³´ë©´, Survivor ì˜ì—­ì— ì¡´ì¬í•˜ëŠ” ì–´ë–¤ í•œê³„ì (threshold) ì— ë„ë‹¬í•œ ê°ì²´ë“¤ì€ ( ì˜ˆë¥¼ë“¤ì–´ 15ë²ˆì˜ GC cycle ë™ì•ˆ ì‚´ì•„ë‚¨ìŒ) â€œì˜¤ëœ ì‹œê°„ ì‚¬ìš©ë  ê°ì²´" ë¼ê³  ì˜ˆìƒë˜ì–´ì§„ë‹¤. ë”°ë¼ì„œ ì´ëŸ° ê°ì²´ë“¤ì€  Old generation ìœ¼ë¡œ ìŠ¹ê¸‰(?promoted) í•œë‹¤.

- ì¦‰ GC ëŠ” ì–´ë–¤ ê°ì²´ì˜ collection ì—ì„œ ì‚´ì•„ë‚¨ì€ íšŸìˆ˜ë¥¼ ì¶”ì í•˜ê³  ìˆë‹¤. ì´ê±¸ age ë¼ê³  í•˜ë©´, GCê°€ ëë‚  ë•Œ ë§ˆë‹¤ ê° ê°ì²´ë“¤ì€ í•œ ì‚´ ì”© ë” ë¨¹ëŠ”ë‹¤ê³  ìƒê°í•˜ë©´ ëœë‹¤.

> ì°¸ê³ ë¡œ ì´ Threshold ëŠ” JVM ì— ì˜í•´ ë™ì ìœ¼ë¡œ ì¡°ì •ë˜ê³  ìˆëŠ”ë°, ìš°ë¦¬ê°€ ì§ì ‘ max ê°’ì„ ì„¸íŒ… í•´ ì¤„ ìˆ˜ ìˆìŒ. ëŒ€ë¶€ë¶„ JVMì˜ ê¸°ë³¸ threshold ê°’ì€ 15 GC cycle ì´ë¼ê³  í•¨ )
>
- ê·¸ë¦¬ê³  Survivor ì˜ì—­ì—ì„œ Young generation ì—ì„œ ì‚´ì•„ìˆëŠ” ëª¨ë“  ê°ì²´ë“¤ì„ ê°€ì ¸ê°€ê¸°ì— ê³µê°„ì´ ì¶©ë¶„í•˜ì§€ ì•Šì€ ê²½ìš°ì—ë„ Promotion ì´ ë°œìƒí•œë‹¤ê³  í•œë‹¤.

---

## Old ì˜ì—­

- ë°ì´í„°ê°€ ê°€ë“ì°¨ë©´ GC ë¥¼ ì‹¤í–‰í•œë‹¤. ì´ ì˜ì—­ì—ëŠ” Young ì— ìˆëŠ” ê°ì²´ë“¤ë³´ë‹¤ garbage ê°€ ë  í™•ë¥ ì´ ì ì€ ê°ì²´ë“¤ì´ ì¡´ì¬í•œë‹¤.
    - ì¦‰, Old generation ì— ì¡´ì¬í•˜ëŠ” ëŒ€ë¶€ë¶„ì˜ ê°ì²´ë“¤ì€ Young ì²˜ëŸ¼ â€œê³§ ì‚¬ë¼ì§ˆ ì• ë“¤â€ ì´ ì•„ë‹ˆë¼ â€œ ì˜¤ë«ë™ì•ˆ ì‚´ì•„ìˆì„ ì• ë“¤" ì´ë¼ê³  ìƒê° ë˜ëŠ” ê²ƒë“¤ì´ê¸° ë•Œë¬¸ì— ì—¬ê¸°ì„œëŠ” Young ì—ì„œ ì¼ì–´ë‚˜ë˜ ê³µê°„ì‚¬ì´ì— ê°ì²´ë¥¼ ë³µì‚¬ì‹œí‚¤ëŠ” ê³¼ì •ë³´ë‹¤ëŠ” ***â€œë‹¨í¸í™”ë¥¼ ìµœì†Œí™” ì‹œí‚¤ëŠ” ê³¼ì •" ì´ ì¼ì–´ë‚œ***ë‹¤.
        1. GC root ë¥¼ í†µí•´ ì ‘ê·¼ ê°€ëŠ¥í•œ ëª¨ë“  ê°ì²´ë“¤ì„ mark
        2. unrechable ê°ì²´ë“¤ì€ ì‚­ì œ
        3. ì‚´ì•„ìˆëŠ” ê°ì²´ë“¤ì´ ì—°ì†ì ìœ¼ë¡œ ì¡´ì¬í•˜ê²Œ í•˜ê¸° ìœ„í•œ Compaction - ê°ì²´ë“¤ì´ ì—°ì†ëœ ê³µê°„ì—ì„œ ì¡´ì¬í•˜ë„ë¡ Copy. ( Old ì˜ì—­ì˜ ì‹œì‘ì  ë¶€í„° ì±„ì›Œë‚˜ê°„ë‹¤ )
- Young ì—ì„œ GC ë³´ë‹¤ ì ì€ íšŸìˆ˜ì˜ GC ê°€ ì¼ì–´ë‚œë‹¤.
- GC ë°©ì‹ì— ë”°ë¼ ì²˜ë¦¬ê°€ ë‹¬ë¼ì§„ë‹¤. ìš°ë¦¬ê°€ ë§í•˜ë˜ GC ë°©ì‹ì´ ë‹¤ë¥´ë‹¤ëŠ” ê²ƒì€ Old ì˜ì—­ì˜ GC ë°©ì‹ì´ ë‹¤ë¦„ì„ ì˜ë¯¸í•œë‹¤.

  ë‹¤ì–‘í•œ GC ë°©ì‹ë“¤ì´ ìˆì§€ë§Œ ...ğŸ˜¥

    - Serial GC
    - Parallel GC
    - G1 GC

---

# Old ì˜ì—­ì˜ ê°ì¢… GC

## Serial GC

Old ì˜ì—­ì˜ GC ê°€ Serial GC ë°©ì‹ì¸ ê²½ìš° **mark-sweep-compact** ë¼ëŠ” ì•Œê³ ë¦¬ì¦˜ì„ ì‚¬ìš©í•œë‹¤.

ì´ ì•Œê³ ë¦¬ì¦˜ì˜ ê³¼ì •ì€ ë‹¤ìŒê³¼ ê°™ë‹¤.

1. Old ì˜ì—­ì—ì„œ ì‚´ì•„ìˆëŠ” ê°œì²´ë¥¼ ì‹ë³„ (Mark)
2. heap ì˜ ì• ë¶€ë¶„ë¶€í„° í™•ì¸í•˜ì—¬, ì‚´ì•„ìˆëŠ” ê²ƒë§Œì„ ë‚¨ê¸´ë‹¤ ( sweep)
3. ë©”ëª¨ë¦¬ **ì»´íŒ©ì…˜ì„ ì§„í–‰**í•œë‹¤ (ìŠ¤ìœ„í•‘ ê³¼ì • ì´í›„ ë©”ëª¨ë¦¬ ë‹¨í¸í™”ê°€ ì¼ì–´ë‚˜ê² ì£ ?)

- ì¥ë‹¨ì 
    - CPU ì½”ì–´ê°€ í•˜ë‚˜ë§Œ ìˆì„ ë•Œ ì‚¬ìš©í•˜ê¸° ìœ„í•´ ë§Œë“¤ì–´ì§„ ë°©ì‹
    - ì„±ëŠ¥ì´ ë§¤ìš° ì¢‹ì§€ ì•Šë‹¤.

## Parallel GC

- Serial GC ëŠ” GC ì²˜ë¦¬ ìŠ¤ë ˆë“œê°€ í•˜ë‚˜ì¸ ê²ƒì— ë¹„í•´, Parallel GC ëŠ” GC ì²˜ë¦¬ ìŠ¤ë ˆë“œê°€ â€œì—¬ëŸ¬ê°œ"
- ë”°ë¼ì„œ Serial GC ë³´ë‹¤ ë¹ ë¥¸ ì²˜ë¦¬ê°€ ê°€ëŠ¥í•˜ë‹¤.
- ì¥ë‹¨ì 
    - ìŠ¤ë ˆë“œê°€ ì—¬ëŸ¬ê°œë¼ê³  í•˜ë‹ˆ, ì½”ì–´ì˜ ê°œìˆ˜ê°€ ë§ì„ ë•Œ ìœ ë¦¬í•˜ë‹¤.
    - **í•˜ì§€ë§Œ collection ì˜ ëª¨ë“  ê³¼ì •ì´ ì¼ì–´ë‚˜ëŠ” ë™ì•ˆ ì–´ë–¤ interruption ë„ ì¼ì–´ë‚˜ë©´ ì•ˆë˜ê¸°( interrupt ë¼ëŠ” ê²ƒì€ ì—¬ëŸ¬ íƒœìŠ¤í¬ì—ì„œ cpu ë¥¼ ê³µìœ í•˜ë©´ì„œ ë‹¤ë¥¸ íƒœìŠ¤í¬ì—ì„œë„ ë°œìƒ í•  ìˆ˜ ìˆëŠ” ê²ƒìœ¼ë¡œ ì•Œê³  ìˆë‹¤.) ë•Œë¬¸ì—, ë§¤ìš° ê¸´ stop - the -world ì‹œê°„**ì„ ê°–ëŠ”ë‹¤.

## Parallel Old GC

- JDK 5 update 6 ë¶€í„° ì œê³µí•œ GC ë°©ì‹

ì´ ë°©ì‹ì€ Mark-Summary-Compaction ë‹¨ê³„ë¥¼ ê±°ì¹œë‹¤.

1. Old ì˜ì—­ì—ì„œ ì‚´ì•„ìˆëŠ” ê°œì²´ë¥¼ ì‹ë³„ (Mark)
2. GC ë¥¼ ìˆ˜í–‰í–ˆë˜ ì˜ì—­ì— ëŒ€í•´ ë³„ë„ë¡œ, ì‚´ì•„ìˆëŠ” ê°ì²´ë¥¼ ì‹ë³„í•œë‹¤.
3. ë©”ëª¨ë¦¬ ì»´íŒ©ì…˜ì„ ì§„í–‰í•œë‹¤

## CMS GC (Concurrent Mark Sweep)

> Old generation ì—ì„œì˜ collection ë™ì•ˆ ì¼ì–´ë‚˜ëŠ” ê¸´ stop-the-world ë¥¼ í”¼í•˜ê¸° ìœ„í•´ ë§Œë“¤ì–´ì¡Œë‹¤.
>
>
> ë‹¤ë¥¸ ìŠ¤ë ˆë“œê°€ ì‹¤í–‰í•˜ëŠ” ë™ì•ˆ mark, sweep ì„ í•˜ëŠ” ê³¼ì •ë“¤ì´ ì¡´ì¬í•˜ê¸° ë•Œë¬¸ì— **stop-the-world ì‹œê°„ì´ ì§§ë‹¤ëŠ” íŠ¹ì§•ì´ ìˆë‹¤.**
>

![img_9.png](img_9.png)

[http://java.sun.com/j2se/reference/whitepapers/memorymanagement_whitepaper.pdf](http://java.sun.com/j2se/reference/whitepapers/memorymanagement_whitepaper.pdf)

Initial Mark, Remark ë™ì•ˆì€ stop-the-world ë¥¼ í•˜ì§€ë§Œ

Concurrent Mark,Sweep ëŠ” ë‹¤ë¥¸ ìŠ¤ë ˆë“œê°€ ì‹¤í–‰ì¤‘ì¸ ìƒíƒœì—ì„œë„ ë™ì‹œì— ì§„í–‰í•œë‹¤.

- Initial Mark ì—ëŠ” í´ë˜ìŠ¤ë¡œë”ì—ì„œ ê°€ì¥ ê°€ê¹Œìš´ ê°ì²´ ì¤‘ ì‚´ì•„ ìˆëŠ” ê°ì²´ë¥¼ ì°¾ëŠ” ê²ƒ ë§Œì„ í•˜ê¸° ë•Œë¬¸ì— ë§¤ìš° ì§§ì€ ì‹œê°„ì´ ê±¸ë¦°ë‹¤.
- Concurrent Mark ì—ì„œëŠ” í•´ë‹¹ ë§ˆí¬ì—ì„œ ì‚´ì•„ìˆë‹¤ê³  í™•ì¸í•œ ê°ì²´ë“¤ì„ ë£¨íŠ¸ë¡œí•˜ì—¬ ì´ë“¤ì´ ì°¸ì¡°í•˜ê³  ìˆëŠ” ê°ì²´ë“¤ì„ ë”°ë¼ê°€ í™•ì¸í•œë‹¤.
- Remark : Concurrent mark ì—ì„œ ìƒˆë¡œ ì¶”ê°€ or ì°¸ì¡°ê°€ ëŠê¸´ ê°ì²´ë¥¼ í™•ì¸
- Concurrent Sweep : ì“°ë ˆê¸°ë¥¼ ì •ë¦¬í•œë‹¤.

> ë‹¨ì 
>
> - ë‹¤ë¥¸ GC ë°©ì‹ë³´ë‹¤ ë©”ëª¨ë¦¬,CPU ë¥¼ ë” ë§ì´ ì‚¬ìš©í•œë‹¤
    >     - ì¦‰, í˜„ì¬ ë¨¸ì‹ ì˜ ë¬¼ë¦¬ì ì¸ ì½”ì–´ì˜ 1/4 ì •ë„ë¥¼ GC ì•Œê³ ë¦¬ì¦˜ì— ì‚¬ìš©í•˜ê²Œ ëœë‹¤.
> - ì»´íŒ©ì…˜ ë‹¨ê³„ëŠ” ê¸°ë³¸ìœ¼ë¡œ ì œê³µë˜ì§€ ì•ŠëŠ”ë‹¤. â†’ ë©”ëª¨ë¦¬ fragmentê°€ ë§¤ìš° ë§ì€ ìƒí™© â†’ ì»´íŒ©ì…˜ì´ í•„ìš”í•˜ë‹ˆ ë‚˜ì¤‘ì—ë¼ë„ ì»´íŒ©ì…˜ì„ í•˜ê²Œ ë˜ë©´, ë‹¤ë¥¸ GC ì—ì„œ ì¼ì–´ë‚˜ë˜ stop-the-world ì‹œê°„ë³´ë‹¤ ì´ ë•Œ GC ì—ì„œ ì´ compaction ì‹¤í–‰í•˜ëŠ”ë° ê±¸ë¦¬ëŠ” stop-the-world ì‹œê°„ì´ ë” ê¸¸ìˆ˜ë„ ìˆë‹¤. ë”°ë¼ì„œ Compaction ì‘ì—…ì˜ íšŸìˆ˜, ê±¸ë¦¬ëŠ” ì‹œê°„ì„ í™•ì¸í•˜ë©° ì§„í–‰í•´ì•¼í•œë‹¤.
    >     - ê¸°ë³¸ì ìœ¼ë¡œ free-list (

---

## G1 GC

- G1 GC ëŠ” CMS ì²˜ëŸ¼ ì´ ì—­ì‹œ ë©€í‹° í”„ë¡œì„¸ìŠ¤ ë¨¸ì‹ ì„ ìœ„í•´ ë§Œë“¤ì–´ì¡Œìœ¼ë©° CMS collector ë¥¼ ëŒ€ì²´í•˜ê¸° ìœ„í•´ ë§Œë“¤ì–´ì¡Œë‹¤ê³ ë„ ë³¼ ìˆ˜ ìˆë‹¤. ì„±ëŠ¥ë©´ì—ì„œ í›¨ì”¬ íš¨ìœ¨ì ì´ë‹¤.

ì•ì„œ ì–˜ê¸°í•œ Young, Old ì˜ì—­ì„ ë¨¸ë¦¬ì†ì—ì„œ ì§€ìš°ì.

- ì „í†µì ì¸ GCì˜ heap êµ¬ì¡°ì™€ ë‹¤ë¥¸ ëª¨ìŠµì´ë‹¤. ê° ì˜ì—­ì˜ ì‚¬ì´ì¦ˆëŠ” í•„ìš”ì— ë”°ë¼ ë™ì ìœ¼ë¡œ ë°”ë€” ìˆ˜ ìˆë‹¤.
- ë¬¼ë¦¬ì ìœ¼ë¡œ ê° ì˜ì—­ì˜ ê°œë…ì´ ì¡´ì¬í•˜ëŠ” ê²ƒì€ ì•„ë‹ˆì§€ë§Œ, ë©”ëª¨ë¦¬ í• ë‹¹, survivor ê³µê°„ìœ¼ë¡œ ì¹´í”¼, old generation ìœ¼ë¡œ ì´ë™í•˜ëŠ” ë“±ì˜ ê°œë…ì€ ì¡´ì¬í•œë‹¤.

ì—¬ê¸°ì„œëŠ” heap ì˜ì—­ì„ ë™ì¼í•œ ì‚¬ì´ì¦ˆì˜ regionë“¤ë¡œ ìª¼ê°œë†“ëŠ”ë‹¤. ê° regionì€ ê°€ìƒ ë©”ëª¨ë¦¬ìƒì—ì„œ ì—°ì†ì ì¸ ê³µê°„ì´ë‹¤. ê° regionì€ eden, survivor, old ì˜ì—­ ì¤‘ í•˜ë‚˜ì— í•´ë‹¹ëœë‹¤.

![img_10.png](img_10.png)


ì¶œì²˜: "The Garbage-First Garbage Collector" (TS-5419), JavaOne 2008, p. 19

- ë©”ëª¨ë¦¬ê°€ ë°”ë‘‘íŒê³¼ ê°™ë‹¤ê³  ìƒê° í•  ë•Œ, ê° ì˜ì—­ì— ê°ì²´ë¥¼ í• ë‹¹í•˜ê³  GC ë¥¼ ì‹¤í–‰ â†’ í•´ë‹¹ ì˜ì—­ì´ ê½‰ ì°¨ë©´ ë‹¤ë¥¸ ì˜ì—­ì—ì„œ ê°ì²´ë¥¼ í• ë‹¹í•˜ê³  GC ì‹¤í–‰.
- Garbage Collection ìˆ˜í–‰ ì‹œ , concurrent global markingì„ í†µí•´ heap ì „ì²´ì—ì„œ ê°ì²´ì˜ ìƒì¡´ ì—¬ë¶€ë¥¼ íŒŒì•… í•œë‹¤.
    - ì´ ê³¼ì •ì„ ëë‚´ë©´ ì–´ë–¤ ì˜ì—­ì´ empty í•œì§€ ì•Œê³  ìˆë‹¤.
    - *ì´ë¥¼ í†µí•´, ì‚´ì•„ìˆëŠ” ê°ì²´ê°€ ìµœëŒ€í•œ ì ê²Œ ë“¤ì–´ìˆëŠ” region ì„ ìˆ˜ì§‘í•œë‹¤.  ì´ëŸ¬í•œ ì˜ì—­ì„ ë¨¼ì € collect í•œë‹¤*.

> **ìµœëŒ€ ì¥ì  :  G1 GCëŠ” CMS GC, Parallel Old gc ì— ë¹„í•´ stop-the-world ê°€ ì˜ˆì¸¡ ê°€ëŠ¥í•œ ì‹œê°„ ì•ˆì— ì´ë£¨ì–´ì§„ë‹¤**.
>

# ì°¸ì¡°

[](https://www.baeldung.com/jvm-garbage-collectors)

[NAVER D2](https://d2.naver.com/helloworld/1329)

[GC Algorithms: Basics | Plumbr - User Experience & Application Performance Monitoring](https://plumbr.io/handbook/garbage-collection-algorithms)

[Luavis' Dev Story - G1: Garbage first garbage collector](https://luavis.me/server/g1-gc)


## ì¶”ê°€ì ìœ¼ë¡œ ê³µë¶€ê°€ í•„ìš”í•˜ë‹¤ê³  ìƒê°ë˜ëŠ” ë¶€ë¶„

- G1ì´ ì¤‘ìš”í•˜ë‹¤ê³  í•˜ëŠ”ë° G1ì— ëŒ€í•œ ì¡°ì‚¬ë¥¼ ê±°ì˜ í•˜ì§€ ëª»í•¨.
- Recachability ?
- GC root ?

[NAVER D2](https://d2.naver.com/helloworld/329631)

[](https://www.baeldung.com/java-gc-roots)

